#!/usr/bin/make -f
# -*- makefile -*-

# Uncomment this to turn on verbose mode.
#export DH_VERBOSE=1

BIN_PKGNAME := profitbricks-python-blockdevs
DOC_PKGNAME := profitbricks-python-blockdevs-doc

INSTALL_DIR := $(CURDIR)/debian/$(BIN_PKGNAME)
DOC_DIR     := $(CURDIR)/debian/$(DOC_PKGNAME)/usr/share/doc/$(DOC_PKGNAME)

%:
	dh $@ --with python2

override_dh_auto_install:
	dh_auto_install
	#@echo "Installing man pages ..."
	#mkdir -p man
	#help2man -n scstadm -s 8 -o man/scstadm.8 --no-info bin/scstadm
	#@echo "Generate and install default configuration file ..."
	#bin/scstadmd --default-config > scstadm.cfg.default
	#install -d $(INSTALL_DIR)/etc/scstadm
	#install -m 0644 scstadm.cfg.default $(INSTALL_DIR)/etc/scstadm/
	@echo "Documentation ..."
	mkdir -p $(DOC_DIR)/html
	mkdir -p $(DOC_DIR)/pdf
	epydoc --html -v -o $(DOC_DIR)/html $(CURDIR)/pb_blockdev
	epydoc --pdf -o $(DOC_DIR)/pdf $(CURDIR)/pb_blockdev

override_dh_compress:
	dh_compress -X.py -X.pdf
